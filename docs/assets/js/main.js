"use strict";const input=document.querySelector("#search-input"),button=document.querySelector("#search-button"),result=document.querySelector("#series-container"),defaultImg="https://via.placeholder.com/210x295/ffffff/666666/?text=TV",urlBase="http://api.tvmaze.com/search/shows?q=",fav=document.querySelector("#fav-choose");let favList=[],list=[];const getSavedFavsFromLocalStorage=JSON.parse(localStorage.getItem("userFavs")),setFavsIntoLocalStorage=()=>{localStorage.setItem("userFavs",JSON.stringify(favList))},getFromLocalStorage=()=>{null!==getSavedFavsFromLocalStorage?(favList=getSavedFavsFromLocalStorage,paintFav()):favList=[]},getDataFromAPI=e=>{e.preventDefault();const t=input.value.toLowerCase();fetch(urlBase+t).then(e=>e.json()).then(e=>{list=e,paintSeries(e)})},paintSeries=e=>{result.innerHTML="";for(let t=0;t<e.length;t++){const a=e[t].show.name,s=e[t].show.image,n=e[t].show.id,o=document.createElement("div");o.classList.add("show-container");const c=document.createElement("h3");c.classList.add("name-show");const l=document.createElement("img");l.classList.add("img-show");const d=document.createElement("p");d.classList.add("id-show");const i=document.createTextNode(n),r=document.createTextNode(a);l.src=null===s?defaultImg:s.medium||s.original,result.appendChild(o),o.appendChild(l),o.appendChild(c),o.appendChild(d),c.appendChild(r),d.appendChild(i),o.addEventListener("click",pickAsFav)}},clearFav=()=>{fav.innerHTML=""},paintFav=()=>{fav.innerHTML="";const e=document.createElement("ul");e.classList.add("fav-list"),fav.appendChild(e);for(let t of favList){const a=t.img,s=t.name,n=t.id,o=document.createElement("li");o.classList.add("fav-box-show");const c=document.createElement("h3");c.classList.add("fav-name-show");const l=document.createElement("img");l.classList.add("fav-img-show");const d=document.createElement("div");d.classList.add("fav-delete");const i=document.createElement("div");i.classList.add("fav-id-show");const r=document.createTextNode(n),v=document.createTextNode(s);l.src=a,e.appendChild(o),o.appendChild(l),o.appendChild(c),o.appendChild(i),o.appendChild(d),c.appendChild(v),i.appendChild(r),d.addEventListener("click",deleteFav)}const t=document.querySelector("#fav-deleteAll");favList.length>1?(t.classList.remove("hidden"),t.classList.add("fav-deleteAll-show")):t.classList.add("hidden"),t.addEventListener("click",deleteAll)};function deleteAll(){favList=[],paintFav()}function deleteFav(e){const t=e.currentTarget.parentElement,a=t.querySelector(".fav-img-show"),s=t.querySelector(".fav-name-show"),n=t.querySelector(".fav-id-show"),o=(a.src,s.innerHTML,n.innerHTML);for(let e=0;e<favList.length;e++)favList[e].id===o&&favList.splice(e,1);setFavsIntoLocalStorage(),paintFav()}const pickAsFav=e=>{const t=e.currentTarget;t.classList.toggle("fav-show");const a=t.querySelector(".img-show"),s=t.querySelector(".name-show"),n=t.querySelector(".id-show"),o={img:a.src,name:s.innerHTML,id:n.innerHTML};t.classList.contains("fav-show")&&favList.push(o),setFavsIntoLocalStorage(),paintFav()};null!==getSavedFavsFromLocalStorage?(favList=getSavedFavsFromLocalStorage,paintFav()):favList=[],button.addEventListener("click",getDataFromAPI);